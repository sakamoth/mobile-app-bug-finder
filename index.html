<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã®ãƒã‚°ç™ºè¦‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯é›†</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f7;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            margin: 0;
            font-size: 2rem;
        }
        h2 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
            margin-top: 2rem;
            color: #2c3e50;
        }
        h3 {
            color: #3498db;
            margin-top: 1.5rem;
        }
        .subtitle {
            font-size: 1rem;
            margin-top: 0.5rem;
            opacity: 0.8;
        }
        .search-container {
            margin-bottom: 2rem;
            position: relative;
            max-width: 100%;
        }
        .search-container input {
            width: 100%;
            padding: 0.8rem 1rem 0.8rem 2.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        .search-icon {
            position: absolute;
            left: 0.8rem;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }
        .category-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }
        .category-btn {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .category-btn:hover {
            background-color: #f0f0f0;
        }
        .category-btn.active {
            background-color: #3498db;
            color: white;
            border-color: #3498db;
        }
        .category-icon {
            margin-right: 0.5rem;
        }
        .technique-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        .technique-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
        }
        .technique-card:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        .technique-header {
            padding: 1.2rem;
            cursor: pointer;
            position: relative;
        }
        .technique-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0 0 0.5rem 0;
            padding-right: 30px;
        }
        .technique-checkbox {
            position: absolute;
            top: 1.2rem;
            right: 1.2rem;
            transform: scale(1.3);
        }
        .technique-checkbox input {
            cursor: pointer;
        }
        .technique-description {
            color: #666;
            font-size: 0.9rem;
            margin: 0;
        }
        
        /* ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£ã®ã‚¹ã‚¿ã‚¤ãƒ« - ã“ã“ã‹ã‚‰æ–°è¦è¿½åŠ  */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal-content {
            background-color: white;
            width: 80%;
            max-width: 800px;
            margin: 50px auto;
            border-radius: 8px;
            padding: 20px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            color: #666;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            line-height: 1;
        }
        
        .modal-close:hover {
            color: #333;
        }
        
        .modal-title {
            margin-top: 0;
            padding-right: 30px;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .modal-description {
            color: #666;
            font-style: italic;
            margin-bottom: 20px;
        }
        
        .modal-body {
            margin-top: 20px;
        }
        /* ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£ã®ã‚¹ã‚¿ã‚¤ãƒ« - ã“ã“ã¾ã§ */
        
        .progress-bar {
            margin-bottom: 1.5rem;
            background-color: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .progress-title {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        .progress-track {
            height: 10px;
            width: 100%;
            background-color: #eee;
            border-radius: 5px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: #3498db;
            border-radius: 5px;
            width: 0%;
            transition: width 0.3s;
        }
        footer {
            margin-top: 3rem;
            text-align: center;
            padding: 1.5rem;
            background-color: #2c3e50;
            color: white;
            border-radius: 8px;
        }
        .no-results {
            text-align: center;
            padding: 2rem;
            color: #666;
        }
        @media (max-width: 768px) {
            .technique-grid {
                grid-template-columns: 1fr;
            }
            .category-filters {
                overflow-x: auto;
                padding-bottom: 1rem;
                flex-wrap: nowrap;
            }
            .category-btn {
                white-space: nowrap;
            }
            .modal-content {
                width: 95%;
                margin: 30px auto;
            }
        }
        .github-corner:hover .octo-arm {
            animation: octocat-wave 560ms ease-in-out;
        }
        @keyframes octocat-wave {
            0%, 100% { transform: rotate(0); }
            20%, 60% { transform: rotate(-25deg); }
            40%, 80% { transform: rotate(10deg); }
        }
        @media (max-width: 500px) {
            .github-corner:hover .octo-arm {
                animation: none;
            }
            .github-corner .octo-arm {
                animation: octocat-wave 560ms ease-in-out;
            }
        }
    </style>
</head>
<body>
    <!-- GitHub Corner ãƒªãƒ³ã‚¯ -->
    <a href="https://github.com/sakamoth/mobile-app-bug-finder" class="github-corner" aria-label="View source on GitHub">
        <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
            <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
        </svg>
    </a>

    <header>
        <h1>ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã®ãƒã‚°ç™ºè¦‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯é›†</h1>
        <div class="subtitle">Androidãƒ»iOSé–‹ç™ºè€…å‘ã‘ã®å“è³ªæ”¹å–„ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</div>
    </header>

    <div class="progress-bar">
        <div class="progress-title">
            <span>é€²æ—çŠ¶æ³</span>
            <span id="progress-text">0/22</span>
        </div>
        <div class="progress-track">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
    </div>

    <div class="search-container">
        <span class="search-icon">ğŸ”</span>
        <input type="text" id="search-input" placeholder="ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’æ¤œç´¢...">
    </div>

    <div class="category-filters" id="category-filters">
        <!-- ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒœã‚¿ãƒ³ã¯JSã§ç”Ÿæˆ -->
    </div>

    <div class="technique-grid" id="technique-grid">
        <!-- ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚«ãƒ¼ãƒ‰ã¯JSã§ç”Ÿæˆ -->
    </div>

    <div class="no-results" id="no-results" style="display: none;">
        æ¤œç´¢çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚åˆ¥ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚
    </div>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚° - æ–°è¦è¿½åŠ  -->
    <div id="technique-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <h2 class="modal-title" id="modal-title"></h2>
            <p class="modal-description" id="modal-description"></p>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <footer>
        <p>ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªé–‹ç™ºè€…ã®ãŸã‚ã®ãƒã‚°ç™ºè¦‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯é›† Â© 2025</p>
    </footer>

    <script>
        // ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹
        const dataUrl = 'techniques.json';
        
        // ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€
        async function loadData() {
            try {
                const response = await fetch(dataUrl);
                if (!response.ok) {
                    throw new Error('ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('ã‚¨ãƒ©ãƒ¼:', error);
                // ã‚¨ãƒ©ãƒ¼æ™‚ã«ã¯ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
                return {
                    categories: [
                        { id: 'overview', name: 'æ¦‚è¦', icon: 'ğŸ“‹' }
                    ],
                    techniques: [
                        {
                            id: 1,
                            category: 'overview',
                            title: 'ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ',
                            description: 'techniques.jsonãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‹ã€èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚',
                            content: '<p>ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£ã—ãé…ç½®ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>'
                        }
                    ]
                };
            }
        }
        
        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã‚’èª­ã¿è¾¼ã‚€
        function loadCheckedState() {
            const saved = localStorage.getItem('bugFinderChecked');
            return saved ? JSON.parse(saved) : {};
        }
        
        // ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã‚’ä¿å­˜ã™ã‚‹
        function saveCheckedState(checkedState) {
            localStorage.setItem('bugFinderChecked', JSON.stringify(checkedState));
        }
        
        // é€²æ—çŠ¶æ³ã‚’æ›´æ–°ã™ã‚‹
        function updateProgress(checkedState, totalTechniques) {
            const checkedCount = Object.values(checkedState).filter(value => value === true).length;
            const progressPercent = totalTechniques > 0 ? (checkedCount / totalTechniques) * 100 : 0;
            
            document.getElementById('progress-text').textContent = `${checkedCount}/${totalTechniques}`;
            document.getElementById('progress-fill').style.width = `${progressPercent}%`;
        }
        
        // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’åˆæœŸåŒ–
        function initializeCategoryFilters(categories, activeCategory, onCategoryChange) {
            const filtersContainer = document.getElementById('category-filters');
            filtersContainer.innerHTML = '';
            
            categories.forEach(category => {
                const button = document.createElement('button');
                button.className = `category-btn ${category.id === activeCategory ? 'active' : ''}`;
                button.dataset.category = category.id;
                
                const icon = document.createElement('span');
                icon.className = 'category-icon';
                icon.textContent = category.icon;
                
                button.appendChild(icon);
                button.appendChild(document.createTextNode(category.name));
                
                button.addEventListener('click', () => {
                    document.querySelector('.category-btn.active').classList.remove('active');
                    button.classList.add('active');
                    onCategoryChange(category.id);
                });
                
                filtersContainer.appendChild(button);
            });
        }
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£ã®æ©Ÿèƒ½ - æ–°è¦è¿½åŠ 
        function showTechniqueModal(technique) {
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®å†…å®¹ã‚’è¨­å®š
            document.getElementById('modal-title').textContent = technique.title;
            document.getElementById('modal-description').textContent = technique.description;
            document.getElementById('modal-body').innerHTML = technique.content;
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
            const modal = document.getElementById('technique-modal');
            modal.style.display = 'block';
            
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ç„¡åŠ¹åŒ–
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal() {
            const modal = document.getElementById('technique-modal');
            modal.style.display = 'none';
            
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æœ‰åŠ¹åŒ–
            document.body.style.overflow = 'auto';
        }
        
        // ãƒ¡ã‚¤ãƒ³å‡¦ç†
        async function init() {
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®š
            document.querySelector('.modal-close').addEventListener('click', closeModal);
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®å¤–å´ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚é–‰ã˜ã‚‹ã‚ˆã†ã«è¨­å®š
            document.getElementById('technique-modal').addEventListener('click', function(event) {
                if (event.target === this) {
                    closeModal();
                }
            });
            
            // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
            const data = await loadData();
            const { categories, techniques } = data;
            
            // ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
            let checkedState = loadCheckedState();
            
            // ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹ã‚«ãƒ†ã‚´ãƒªãƒ¼
            let activeCategory = 'overview';
            
            // DOMè¦ç´ ã¸ã®å‚ç…§ã‚’å–å¾—
            const searchInput = document.getElementById('search-input');
            const techniqueGrid = document.getElementById('technique-grid');
            const noResults = document.getElementById('no-results');
            
            // ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
            function updateTechniqueList() {
                // æ¤œç´¢ã‚¯ã‚¨ãƒªã¾ãŸã¯ã‚«ãƒ†ã‚´ãƒªãƒ¼ã§ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
                const query = searchInput.value.toLowerCase();
                let filteredTechniques;
                
                if (query) {
                    filteredTechniques = techniques.filter(tech => 
                        tech.title.toLowerCase().includes(query) || 
                        tech.description.toLowerCase().includes(query) ||
                        tech.content.toLowerCase().includes(query)
                    );
                } else {
                    filteredTechniques = techniques.filter(tech => tech.category === activeCategory);
                }
                
                // ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢
                techniqueGrid.innerHTML = '';
                
                // çµæœãŒãªã„å ´åˆ
                if (filteredTechniques.length === 0) {
                    noResults.style.display = 'block';
                    return;
                }
                
                noResults.style.display = 'none';
                
                // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚ŒãŸãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’è¡¨ç¤º
                filteredTechniques.forEach(technique => {
                    // ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚«ãƒ¼ãƒ‰ã‚’ä½œæˆ
                    const card = document.createElement('div');
                    card.className = 'technique-card';
                    
                    // ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ†
                    const header = document.createElement('div');
                    header.className = 'technique-header';
                    
                    // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹
                    const checkboxContainer = document.createElement('div');
                    checkboxContainer.className = 'technique-checkbox';
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = `technique-${technique.id}`;
                    checkbox.checked = checkedState[technique.id] || false;
                    checkbox.addEventListener('change', (e) => {
                        e.stopPropagation(); // ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã®ä¼æ’­ã‚’æ­¢ã‚ã‚‹
                        checkedState[technique.id] = e.target.checked;
                        saveCheckedState(checkedState);
                        updateProgress(checkedState, techniques.length);
                    });
                    checkboxContainer.appendChild(checkbox);
                    
                    // ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜
                    const title = document.createElement('h3');
                    title.className = 'technique-title';
                    title.textContent = technique.title;
                    
                    const description = document.createElement('p');
                    description.className = 'technique-description';
                    description.textContent = technique.description;
                    
                    header.appendChild(title);
                    header.appendChild(description);
                    header.appendChild(checkboxContainer);
                    
                    // ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ - ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºã«å¤‰æ›´
                    header.addEventListener('click', (e) => {
                        // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸå ´åˆã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤ºã—ãªã„
                        if (e.target !== checkbox && !checkbox.contains(e.target)) {
                            showTechniqueModal(technique);
                        }
                    });
                    
                    // ã‚«ãƒ¼ãƒ‰ã«è¦ç´ ã‚’è¿½åŠ 
                    card.appendChild(header);
                    
                    // ã‚°ãƒªãƒƒãƒ‰ã«ã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ 
                    techniqueGrid.appendChild(card);
                });
            }
            
            // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®åˆæœŸåŒ–
            initializeCategoryFilters(categories, activeCategory, (newCategory) => {
                activeCategory = newCategory;
                updateTechniqueList();
            });
            
            // æ¤œç´¢å…¥åŠ›ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®š
            searchInput.addEventListener('input', () => {
                updateTechniqueList();
            });
            
            // ESCã‚­ãƒ¼ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    closeModal();
                }
            });
            
            // åˆæœŸè¡¨ç¤º
            updateTechniqueList();
            updateProgress(checkedState, techniques.length);
        }
        
        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
